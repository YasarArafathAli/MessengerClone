{"version":3,"sources":["firebase.js","contexts/AuthContext.js","components/Chats.js","components/Login.js","components/App.js","index.js"],"names":["auth","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","AuthContext","React","createContext","AuthProvider","children","useState","loading","setLoading","user","setUser","history","useHistory","useEffect","onAuthStateChanged","userdata","console","log","push","value","Provider","Chats","useContext","handleLogout","a","signOut","getFile","url","fetch","response","blob","data","File","type","axios","get","headers","process","email","uid","then","catch","formdata","FormData","append","photoURL","avatar","name","post","error","className","onClick","height","projectID","userName","userSecret","Login","id","signInWithRedirect","GoogleAuthProvider","GoogleOutlined","FacebookAuthProvider","FacebookOutlined","App","style","fontFamily","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.73205572.chunk.js","sourcesContent":["import firebase from 'firebase/app';\r\nimport 'firebase/auth'\r\n\r\n\r\nexport const auth =  firebase.initializeApp({\r\n  apiKey: \"AIzaSyBkCcBr1o2qa7mg0cR5Mi6DGn0qpYx2ErM\",\r\n  authDomain: \"whatsapp-clone-68bce.firebaseapp.com\",\r\n  projectId: \"whatsapp-clone-68bce\",\r\n  storageBucket: \"whatsapp-clone-68bce.appspot.com\",\r\n  messagingSenderId: \"653392782465\",\r\n  appId: \"1:653392782465:web:d910d159029df41cead980\",\r\n  measurementId: \"G-X09TMPYX5Q\"\r\n}).auth();","import React, { useContext, useState, useEffect } from 'react';\r\n\r\nimport { useHistory } from 'react-router-dom';\r\nimport { auth } from '../firebase';\r\n\r\n\r\nconst AuthContext = React.createContext();\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n    const [loading, setLoading] = useState(true);\r\n    const [user, setUser] = useState(null);\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n        auth.onAuthStateChanged(userdata => {\r\n            setUser( userdata );\r\n            setLoading(false);\r\n\r\n            if (userdata != null) {\r\n                console.log(userdata)\r\n                history.push('/chats');\r\n            }\r\n        })\r\n    }, [user, history]);\r\n\r\n    const value = { user };\r\n\r\n    return (\r\n        <AuthContext.Provider value={value}>\r\n            {!loading && children}\r\n\r\n        </AuthContext.Provider>\r\n    )\r\n};\r\n","import React, { useEffect, useState} from 'react'\r\nimport { useHistory } from 'react-router-dom';\r\nimport { ChatEngine } from 'react-chat-engine';\r\nimport { auth } from \"../firebase\";\r\n\r\nimport {useAuth } from '../contexts/AuthContext'\r\nimport axios from 'axios';\r\n\r\nconst Chats = () => {\r\n\r\n    const history = useHistory();\r\n    const [loading, setLoading] = useState(true)\r\n    const { user } = useAuth();\r\n\r\n    console.log(user);\r\n\r\n    const handleLogout = async () => {\r\n        await auth.signOut();\r\n        history.push(\"/\")\r\n    }\r\n\r\n    const getFile = async url => {\r\n        const response = await fetch(url);\r\n        const data = await response.blob();\r\n\r\n        return new File([data], \"userPhoto.jpg\", {type : \"image/jpeg\"})\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (!user) {\r\n            history.push('/');\r\n            return;\r\n        }\r\n        axios.get(\"https://api.chatengine.io/users/me\", {\r\n            headers: {\r\n                \"project-id\": process.env.REACT_APP_CHAT_ENGINE_ID,\r\n                \"user-name\" :user.email,\r\n                \"user-secret\" : user.uid\r\n            }\r\n        })\r\n            .then(() => {\r\n                setLoading(false)\r\n            })\r\n            .catch(() => {\r\n                let formdata = new FormData();\r\n                formdata.append(\"email\", user.email);\r\n                formdata.append(\"username\", user.email);\r\n                formdata.append(\"secret\", user.uid);\r\n\r\n                getFile(user.photoURL)\r\n                    .then((avatar) => {\r\n                        formdata.append('avatar', avatar, avatar.name);\r\n\r\n                        axios.post(\"https://api.chatengine.io/users\", formdata, {\r\n                            headers: {\r\n                                \"private-key\": process.env.REACT_APP_CHAT_ENGINE_KEY\r\n                            }\r\n                        })\r\n                            .then(() => setLoading(false))\r\n                            .catch((error) => console.log(error))\r\n                    })\r\n        })\r\n    }, [user, history])\r\n\r\n    if(!user || loading) return \"Loading...\"\r\n\r\n    return (\r\n        <div className=\"chats-page\">\r\n            <div className=\"nav-bar\">\r\n                <div className=\"logo-tab\">OneChat</div>\r\n                <div className=\"logout-tab\" onClick = {handleLogout}>Logout</div>\r\n            </div>\r\n\r\n            <ChatEngine\r\n                height=\"calc(100vh - 66ox)\"\r\n                projectID={process.env.REACT_APP_CHAT_ENGINE_ID}\r\n                userName={user.email}\r\n                userSecret = {user.uid}\r\n/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Chats\r\n","import React from 'react'\r\nimport { GoogleOutlined, FacebookOutlined } from '@ant-design/icons'\r\nimport firebase from 'firebase/app'\r\nimport { auth } from \"../firebase\";\r\nfunction Login() {\r\n    return (\r\n        <div id=\"login-page\">\r\n        <div id=\"login-card\">\r\n            <h2>Welcome to Chatapp!</h2>\r\n\r\n                <div className=\"login-button google\"\r\n                    onClick={ () => auth.signInWithRedirect(new firebase.auth.GoogleAuthProvider()) }\r\n                >\r\n                    <GoogleOutlined /> Sign in with Google\r\n                </div>\r\n                <br />\r\n                <br />\r\n                <div className=\"login-button facebook\"\r\n                    onClick={() => auth.signInWithRedirect(new firebase.auth.FacebookAuthProvider())}>\r\n                    <FacebookOutlined /> Sign in with Facebook\r\n                </div>\r\n        </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login\r\n","import React from \"react\"\r\n\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\"\r\n\r\nimport { AuthProvider } from \"../contexts/AuthContext\";\r\n\r\nimport Chats from \"./Chats\"\r\nimport Login from \"./Login\"\r\n\r\nfunction App() {\r\n  return (\r\n    <div style={{ fontFamily: 'Avenir' }}>\r\n      <Router>\r\n        <AuthProvider>\r\n          <Switch>\r\n            <Route path=\"/chats\" component={Chats} />\r\n            <Route path=\"/\" component={Login} />\r\n          </Switch>\r\n        </AuthProvider>\r\n      </Router>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}